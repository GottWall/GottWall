<!DOCTYPE html>
<html>
  <head>
    <title>{{ handler.settings['site_title'] }} | Dashboard</title>
    <meta name="description" content="{{ handler.settings['site_title'] }}" />
    <link rel="stylesheet" type="text/css" media="all" href="/static/nv.d3.css"/>
    <script type="text/javascript" src="/static/js/jquery.js"></script>
    <script type="text/javascript" src="/static/js/d3.v2.js"></script>
    <script type="text/javascript" src="/static/js/nv.d3.js"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>
	<!--<script src='{{ static }}metrics/jquery.debounce-1.0.5.js?{{ REVISION }}' type="text/javascript"></script>-->
	<!--<script src="{{ static }}metrics/highcharts.js?{{ REVISION }}" type="text/javascript"></script>-->
	<!--<script src="{{ static }}metrics/grid.js?{{ REVISION }}" type="text/javascript" ></script>-->
	<!--<script src="{{ static }}metrics/metrics-n.js?{{ REVISION }}" type="text/javascript"></script>-->
    <link rel="stylesheet" href="{{ static }}metrics/metric.css?{{ REVISION }}" type="text/css" />
  </head>
  <body>
    <h1>{{ handler.settings['site_title'] }} | Dashboard</h1>
    <p>Simple statistics aggregation platform</a>.

    <h1>Projects:</h1>
    <ul>
      {% for project in config['PROJECTS'].keys() %}
      <li class="">{{ project }} </li>
      {% endfor %}
    </ul>
    <div id="chart">
      <svg style='height:500px'> </svg>
    </div>
    <script>

nv.addGraph(function() {
  var chart = nv.models.lineChart();

  chart.xAxis
      .axisLabel('Time (ms)')
      .tickFormat(d3.format(',r'));

  chart.yAxis
      .axisLabel('Voltage (v)')
      .tickFormat(d3.format('.02f'));

  d3.select('#chart svg')
      .datum(sinAndCos())
    .transition().duration(500)
      .call(chart);

  nv.utils.windowResize(function() { d3.select('#chart svg').call(chart) });

  return chart;
});




/**************************************
 * Simple test data generator
 */


function sinAndCos() {
  var sin = [],
      cos = [];

  for (var i = 0; i < 100; i++) {
    sin.push({x: i, y: Math.sin(i/10)});
    cos.push({x: i, y: .5 * Math.cos(i/10)});
  }

  return [
    {
      values: sin,
      key: 'Sine Wave',
      color: '#ff7f0e'
    },
    {
      values: cos,
      key: 'Cosine Wave',
      color: '#2ca02c'
    }
  ];
}

    </script>



<div id="emd-sample">&lt;script type="text/javascript"&gt;var mst_q = mst_q || [];
(function(){
	var p = (function(){var srs = document.getElementsByTagName('script'); srs = srs[srs.length-1]; return srs})();
	mst_q.push({
		place: p,
		options:  %options%,
		graphs:  %graphs%
	});
	mst_q.host = '%host%';
	var script = document.createElement('script'); script.src =  mst_q.host + "/static/metrics/embed-stat.js";

	p.parentNode.insertBefore(script, p.nextSibling);
})();&lt;/script&gt;
</div>
<div class="arial-page">
<div class="get-code-button-c">
	<a href="#" class="get-code-button pseudo-link">Получить код для размещения</a>
</div>

<div class="graph-canvas-modes">

	<p class="graph-detalization">
		<span>Детализация по</span>
		<label><input type="radio" name="period" value="months"> месяцам</label>
		<label><input type="radio" name="period" value="weeks"> неделям</label>
		<label><input type="radio" name="period" checked='checked' value="days"> дням</label>
		<label><input type="radio" name="period" value="hours"> часам</label>
		<label><input type="radio" name="period" value="minutes"> минутам</label>
	</p>
	<p class="graph-dates">
		<span>Интервал</span>
		с <input type="date" name="start-date" class="start-date"/>
		по <input type="date" name="end-date" class="end-date"/>
	</p>
	<p class="graph-draw-type">
		<select name="graph-draw-type">
			<option value="spline" selected='selected'>Сглаженная линия</option>
			<option value="line" >Ломаная линия</option>

			<option value="column">Столбики</option>
			<option value="area">Область</option>
			<option value="areaspline">Сглаженная область</option>
			<!--
			<option value="bar">Горизонтальные столики</option>
			<option value="scatter">Точки</option>
			-->
		</select>
	</p>
</div>
<div class="get-code-ui">
	<div class="select-size-block">
		<h3>Размер</h3>
		<ul class="embed-size-select">
			<li>
				<label>
					<input type="radio" checked="checked" name="g-size" value='false'/>
					<span>авто</span>

				</label>
			</li>
			<li>
				<label>
					<input type="radio" name="g-size" value="true"/>
					<span>фиксированный</span>

				</label>
				<div class="options">
					<p>
						<label>
							<span>ширина</span>
							<input type="number" size='4' name="g-width"/>

						</label>
					</p>
					<p>
						<label>
							<span>высота</span>
							<input type="number" size='4' name="g-height"/>

						</label>
					</p>
				</div>
			</li>

		</ul>
	</div>
	<p>
		<label>
			<span>Последние n единиц времени до текущего момента (в единициах детализирующих полотно)</span>
			<br/>
			<input type="number" value='7' size='3' name="recent-section" class="recent-section"/>

		</label>
		<span class="desc"></span>

	</p>
	<div>
		Код для размещения
		<div>
			<textarea cols="120" rows="20" readonly='readonly' style="font-size:12px" id='emd-copy-source'></textarea>
		</div>

	</div>
</div>
<div id="graph-canvas"></div>
<div class="graph-controls">


	<div class="graphs-list">
		<div class="sheader">
			<h3>Полотно графиков </h3>
			<!--
			<a href="#" id="create-graph-button" class="pseudo-link">добавить новый график</a>-->
		</div>
	</div>
	<div class="graph-creation">
		<span class="gc-arrow arrow-part" ></span>
		<div class="graph-creation-wrap">
			<div class="graph-creation-section metrics-section" >
				<h4>Метрика</h4>
				<div>
					нажми <em>Ctrl + F</em>, чтобы найти нужную метрику
				</div>
				<ul id='graph-types'>
					{% for metric in metrics|dictsort:"title" %}
						{% if metric.active %}
						<li>
							<span>{{ metric }}</span>
							<input type="hidden" name='id' value="{{metric.id}}"/>
							<input type="hidden" name='months' value="{{ metric.every_month }}"/>
							<input type="hidden" name='weeks' value="{{ metric.every_week }}"/>
							<input type="hidden" name='days' value="{{ metric.every_day }}"/>
							<input type="hidden" name='hours' value="{{ metric.every_hour }}"/>
							<input type="hidden" name='minutes' value="{{ metric.every_minute }}"/>
						</li>
						{% endif %}
					{% endfor %}
				</ul>
			</div>
			<div class="graph-creation-section filters-section">
				<h4>Тип фильтра</h4>
				<ul></ul>
			</div>
			<div class="graph-creation-section filters-values-section">
				<h4>Фильтр</h4>
				<ul></ul>
			</div>
		</div>

	</div>
</div>
</div>
<!--
<div id="content-main">
  <h2>Просмотр метрик</h2>
  <p>Укажите интересующую вас метрику и, если это необходимо, фильтр. Вы можете также выбрать период сбора данных (Минута, Час, День) и диапазон дат.</p>
  <form>
  <div id="select-boxes">
	<div class="select-box">
	  <label for="metric-select">Метрика</label>
	  <select size="10" id="metric-select" name="metric-select">
	  {% for metric in metrics %}
		<option {% if forloop.first %}selected="true"{% endif %} value="{{metric.id}}" day="{{ metric.every_day }}" hour="{{ metric.every_hour }}" minute="{{ metric.every_minute }}"> {{ metric }} </option>
	  {% endfor %}
	  </select>
	</div>

	<div class="select-box">
	  <label for="filter-select">Фильтр по</label>
	  <select size="10" id="filter-select" name="filter-select">
	  </select>
	</div>

	<div class="select-box">
	  <label for="filter-value-select">Значение фильтра</label>
	  <select size="10" multiple="true" id="filter-value-select">
	  </select>
	</div>
  </div>
  <div id="graph-box">
	<div id="graph-controls">
	  <button class="period-chooser selected" period="60">М</button>
	  <button class="period-chooser" period="3600">Ч</button>
	  <button class="period-chooser" period="86400">Д</button>
	  <input type="date" value="2011-08-06" id="date-from"> - <input type="date" value="2011-08-08" id="date-to">
	  <button id="update-graph">Обновить график</button>
	</div>

	<div id="metric-graph"></div>
  </div>
  </form>

</div>-->


  </body>
</html>
